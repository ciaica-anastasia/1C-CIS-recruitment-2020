TCP Client-Server

DESCRIPTION

CLIENT
    Клиент соединяется с сервером по указанным адресу и порту. Перед отправкой сообщений сервер приветствует клиента, после чего клиенту выводится пригласительное сообщение и возможна дальнейшая отправка любых текстовых данных не более 2000 символов. Для получения сообщений других клиентов необходимо отправить сообщение ;N, где N - номер клиента. Для получения собственных сообщений необходимо отправить сообщение ;S. Для завершения работы клиента необходимо написать quit.

SERVER
    Сервер принимает входящие соединения в количестве не более 5 штук, для каждого из которых запускает отдельный поток. В поток передаются параметры - дескриптор сокета, дескриптор файла сообщений, номер клиента. В функции потока отправляется приветственное сообщение клиенту и ожидаются данные от него. После получения данных проверяем, является ли сообщение командой. Если нет, то записываем сообщение в файл, иначе позиционируем указатель в файле на начало, читаем построчно и проверяем число на первой позиции, если соответствует требуемому, то берем сообщение после 4 символа и накапливаем в буфер. По завершению чтения файла, отправляем буфер пользователю. Также возможна дополнительная реализация отправки сообщений клиенту по частям.


COMPILATION AND USAGE

client:
    gcc main.c -o client
    ./client localhost 9998

server:
    gcc -o server main.c -lpthread
    ./server
